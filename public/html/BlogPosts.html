<!DOCTYPE html>
<html>
        <head>
            <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
            <title>Projects page</title>
            <link rel="stylesheet" type="text/css" href="../stylesheets/style.css">
        </head>
        <nav>
            <button class="button-nav" onclick="window.location.href='/'">Home</button>
            <button class="button-nav" onclick="window.location.href='/projects'">Projects</button>
            <button class="button-nav" onclick="window.location.href='/blog'">Blog</button>
            <button class="button-nav" onclick="window.location.href='/app'">App</button>
            <button class="button-nav" onclick="window.location.href='/createpost'">Create Post</button>
    </nav>
        <br>
    <body>
        <article>


            <script>


$(document).ready(loadContent);
            function loadContent()
            {
                getPosts();
            }
            function getPosts()
            {
                fetch('http://localhost:3000/posts/getRecentPosts/',{mode:'cors'}).then(loadPosts);
                    
            }
            function loadPosts()
            {
                document.getElementById("picutrespot").innerHTML(1);
                data.json().then(afterLoad)
                       

            }
            function afterLoad()
            {
                console.log(dataAsObject);
               
                if(dataAsObject.length > 0)
                {
                    let _html ="";
                    dataAsObject.forEach(posts => {_html+= createCard(posts);});
                    document.getElementById('main-content').innerHTML = _html;
                }
                else
                {
                    _html+= createCard();
                }

            }
            
            function createCard(data)
                {
                console.log(data.thumbnail);
                let thumbnailpath=data.PhotoPath
                return `<div id=post-${data.id}class="card"> \
                        <img class="card-image" src ="${thumbnailpath}">\
                        <div class="card-body">\ 
                            <p class="card-title">${data.title}</p>\
                            <p class="card-text">${data.description}</p> \
                            <a href="/posts/imagepost/${data.id}" class="anchor-buttons">Details </a>\
                            </div>\
                            </div> `; 
            }
            </script>

        <p>
            All my pictures
        </p>
        <div id ="picutrespot"></div>
        </article>
    </body>

</html>